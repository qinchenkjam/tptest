var QHPass=window.QHPass||{};QHPass.tpl=QHPass.tpl||{};var QHDomain=window.QHDomain||{i360:"http://i.360.cn",login_https:"https://login.360.cn",captcha:"http://captcha.360.cn",login_http:"http://login.360.cn"};(function(){var e=window.jQuery||window.$||window.qui||window.QW&&window.QW.NodeW,t="",n=null,r="http://s0.qhimg.com/i360/;js;pass_api_/panel,login,reg,name,css,md5,log/v2239.js";QHPass.uinfo={},QHPass.resConfig={jumpUrl:"",charset:"gbk",useType:"pop",loginStatus:!0,userInfoParas:"",postCharset:"gbk",isAutoLogin:!1,loginTitle:"",setNameTitle:"",bindTitle:"",afterRenderPanel:"",needDefaultSkin:!0,afterClosePanel:"",loginAfterSetName:!1,regType:"normal_phone",reloadAfterLogout:!0,thirdFun:function(e){},callback:"",logoutCallback:null,regCallback:function(){},loginCallback:function(){},getInfoAfterReg:!0,src:"pcw_i360",initModule:function(){},regOpts:{},regPhoneOpts:{},loginOpts:{},ssoOpts:{},bindOpts:{},namedOpts:{}},QHPass.mix=function(e,t,n){for(var r in t)if(n||!(r in e))e[r]=t[r];return e},QHPass.thirdLoginSuccess=function(){QHPass.getUserInfo(function(e){if(e.qid)try{QHPass.loginUtils.closeOpenHander(),QHPass.setloginStatus(e),QHPass.resConfig.thirdFun&&QHPass.resConfig.thirdFun(e)}catch(t){}})},QHPass.getDocRect=function(e){e=e||document;var t=e.defaultView||e.parentWindow,n=navigator.userAgent.match(/opera/i),r=e.compatMode,i=e.documentElement,s=t.innerHeight||0,o=t.innerWidth||0,u=t.pageXOffset||0,a=t.pageYOffset||0,f=i.scrollWidth,l=i.scrollHeight;return r!="CSS1Compat"&&(i=e.body,f=i.scrollWidth,l=i.scrollHeight),r&&!n&&(o=i.clientWidth,s=i.clientHeight),f=Math.max(f,o),l=Math.max(l,s),u=Math.max(u,i.scrollLeft,e.body.scrollLeft),a=Math.max(a,i.scrollTop,e.body.scrollTop),{width:o,height:s,scrollWidth:f,scrollHeight:l,scrollX:u,scrollY:a}},QHPass.logoutOtherDomain=function(e){function n(){try{QHPass.setloginStatus({})}catch(e){}QHPass.resConfig.logoutCallback&&QHPass.resConfig.logoutCallback()}if(e.errno==0){var t=location.host.match(/1360\.com|360\.cn|qihoo\.com|woxihuan\.com|yunpan\.cn|360kan\.com|so\.com|360pay\.cn/ig);t&&t[0]!=="360.cn"?QHPass.loadJsonp("http://login."+t[0]+"/?o=sso&m=logout&func=%callback%",n):n()}},QHPass.logout=function(e){e&&(QHPass.resConfig.logoutCallback=e),QHPass.Cookie.get("Q")&&QHPass.Cookie.get("T")?QHPass.getUserInfo(function(e){if(QHPass.resConfig.reloadAfterLogout){var t=QHPass.resConfig.jumpUrl||location.href;location.href=QHDomain.login_http+"/?op=logout&destUrl="+encodeURIComponent(t)+"&crumb="+e.crumb}else QHPass.loadJsonp(QHDomain.login_http+"/?o=sso&m=logout&func=%callback%",QHPass.logoutOtherDomain)}):e&&e()},QHPass.setloginStatus=function(t){QHPass.closePop&&QHPass.closePop();try{if(t.qid){QHPass.uinfo=t;var n=t.userName&&t.userName.indexOf("360U")==-1?t.userName:t.login_email||t.loginEmail||t.userName;e(".loginWrap").show(),e(".nloginWrap").hide(),e(".popUsername").html(n),e(".btn-logout-pop").click(function(e){try{QHPass.logout(),QHPass.preventDefault(e)}catch(t){}})}else QHPass.uinfo={},e(".loginWrap").hide(),e(".popUsername").html(""),e(".nloginWrap").show(),e(".btn-logout-pop")[0]=function(){}}catch(r){}},QHPass.loadJs=function(e,t,n){n=n||{};var r=document.getElementsByTagName("head")[0]||document.documentElement,i=document.createElement("script"),s=!1;i.src=e,n.charset&&(i.charset=n.charset),i.onerror=i.onload=i.onreadystatechange=function(){!s&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")&&(s=!0,t&&t(),i.onerror=i.onload=i.onreadystatechange=null,r.removeChild(i))},r.insertBefore(i,r.firstChild)},QHPass.loadJsonp=function(){var e=new Date*1;return function(t,n,r){r=r||{};var i="QiUserJsonP"+e++,s=r.callbackReplacer||/%callback%/ig;window[i]=function(e){n&&n(e),window[i]=null},s.test(t)?t=t.replace(s,i):t+=(/\?/.test(t)?"&":"?")+"callback="+i,QHPass.loadJs(t,null,r)}}(),QHPass.trim=function(e){return e&&e.replace(/^\s+|\s+$/g,"")},QHPass.byteLen=function(e){return e.replace(/[^\x00-\xff]/g,"--").length},QHPass.forEach=function(e,t,n){for(var r=0,i=e.length;r<i;r++)r in e&&t.call(n,e[r],r,e)},QHPass.queryUrl=function(e,t){e=e.replace(/^[^?=]*\?/ig,"").split("#")[0];var n={};return e.replace(/(^|&)([^&=]+)=([^&]*)/g,function(e,t,r,i){try{r=decodeURIComponent(r),i=decodeURIComponent(i)}catch(s){}r in n?n[r]instanceof Array?n[r].push(i):n[r]=[n[r],i]:n[r]=/\[\]$/.test(r)?[i]:i}),t?n[t]:n},QHPass.Cookie=QHPass.Cookie||{},QHPass.Cookie.get=function(e){if(QHPass.Cookie._isValidKey(e)){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),n=t.exec(document.cookie);if(n)try{return decodeURIComponent(n[2])||null}catch(r){return n[2]||null}}return null},QHPass.Cookie._isValidKey=function(e){return(new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$')).test(e)},QHPass.Cookie.set=function(e,t,n){if(!QHPass.Cookie._isValidKey(e))return;n=n||{};var r=n.expires;"number"==typeof n.expires&&(r=new Date,r.setTime(r.getTime()+n.expires)),document.cookie=e+"="+encodeURIComponent(t)+(n.path?"; path="+n.path:"")+(r?"; expires="+r.toGMTString():"")+(n.domain?"; domain="+n.domain:"")+(n.secure?"; secure":"")},QHPass.Cookie.del=function(e){QHPass.Cookie.set(e,"")},QHPass.getUserStatus=function(){return!!QHPass.uinfo.qid},QHPass.clearUinfo=function(){QHPass.uinfo={}},QHPass.getUserInfo=function(t,n,r){r=r||QHPass.resConfig.userInfoParas;var i=QHPass.Cookie.get("Q"),s=QHPass.Cookie.get("T");if(i&&s)if(QHPass.getUserStatus())t&&t(QHPass.uinfo);else{var o=location.host.match(/1360\.com|360\.cn|qihoo\.com|woxihuan\.com|yunpan\.cn|360kan\.com|so\.com|360pay\.cn/ig),u=r||o&&o[0]&&"http://login."+o[0]+"/?o=sso&m=info&func=%callback%&show_name_flag=1";u&&QHPass.loadJsonp(u,t)}else n&&n(),e(".loginWrap").hide(),e(".nloginWrap").show()},QHPass.execCallback=function(e,t){QHPass.resConfig.loginAfterSetName=!1,typeof e=="string"?window.location.href=e:typeof e=="boolean"?window.location.reload(e):e&&e(t)},QHPass.login=function(e,t){QHPass.getUserInfo(function(t){QHPass.execCallback(e,t)},function(){QHPass.showLogin(e,t)})},QHPass.reg=function(e,t){QHPass.getUserInfo(function(t){QHPass.execCallback(e,t)},function(){QHPass.showReg(e,t)})},QHPass.autoLogin=function(e){QHPass.loadJsonp(QHDomain.login_https+"/?o=sso&m=info&func=%callback%&need_ck=1",function(t){t.auth&&t.auth.length>0&&QHPass.autoAuth(e,t)})},QHPass.autoAuth=function(e,t){t=t||{};var n=(new Date).getTime(),r=location.host.match(/1360\.com|360\.cn|qihoo\.com|woxihuan\.com|yunpan\.cn|360kan\.com|so\.com|360pay\.cn/ig),r=r&&r[0],i=t.auth,s=s||{};if(!r)return;for(var o=0,u=i.length;o<u;o++)i[o].t&&(s.expires=i[o].t-n),s.path="/",s.domain=r,QHPass.Cookie.set(i[o].k,i[o].v,s);if(QHPass.resConfig.loginAfterSetName&&t.type!="bind"&&(!t.userName||t.userName.indexOf("360U")>-1))QHPass.showSetName(e,{notRequest:!0,crumb:t.crumb});else if(QHPass.resConfig.loginAfterSetName&&t.type=="bind")QHPass.showBind(e,{notRequest:!0,crumb:t.crumb});else{QHPass.execCallback(e,t);try{QHPass.setloginStatus(t)}catch(a){}}},QHPass.sso=function(e,t){QHPass.getUserInfo(function(t){QHPass.execCallback(e,t)},function(){QHPass.showSso(e,t)})},QHPass.showSso=function(e,t){QHPass.loadJs(r,function(){QHPass.showSso(e,t)},{charset:QHPass.resConfig.charset})},QHPass.showLogin=function(e,t){QHPass.loadJs(r,function(){QHPass.showLogin(e,t)},{charset:QHPass.resConfig.charset})},QHPass.showReg=function(e,t){QHPass.loadJs(r,function(){QHPass.showReg(e,t)},{charset:QHPass.resConfig.charset})},QHPass.showSetName=function(e,t){QHPass.loadJs(r,function(){QHPass.showSetName(e,t)},{charset:QHPass.resConfig.charset})},QHPass.log=function(){e(document.body).delegate("#mod_quc_pop a, #mod_quc_pop .quc-psp-gstat","mousedown",function(e){var t=e.target,n={cId:monitor.util.getContainerId(t)||"\u7528\u6237\u4e2d\u5fc3\u5f39\u51fa\u5c42",c:monitor.util.getText(t),p:"360_psp_"+QHPass.resConfig.useType};try{monitor.log(n,"click")}catch(r){}})},QHPass.namedUser=function(e,t){QHPass.resConfig.loginAfterSetName=!0,QHPass.getUserInfo(function(t){t.type!="bind"&&(!t.userName||t.userName.indexOf("360U")>-1)?QHPass.showSetName(e,{notRequest:!0,crumb:t.crumb}):t.type=="bind"?QHPass.showBind(e,{notRequest:!0,crumb:t.crumb}):QHPass.execCallback(e,t)},function(){QHPass.showLogin(e)})},QHPass.preventDefault=function(e){e=e||window.event,e&&e.preventDefault?e.preventDefault():e.returnValue=!1},QHPass.Adapter={globalCallback:null,regOpts:{},loginOpts:{},ssoOpts:{},cookie_domains:[0],namedOpts:{}},(window.QW&&Dom.ready||e)(function(){try{e(".btn-login-pop").click(function(e){QHPass.login(QHPass.resConfig.callback||QHPass.resConfig.loginCallback),QHPass.preventDefault(e)}),e(".btn-reg-pop").click(function(e){QHPass.reg(QHPass.resConfig.callback||QHPass.resConfig.regCallback),QHPass.preventDefault(e)});function t(){QHPass.getUserInfo(function(e){n(e)})}function n(e){QHPass.setloginStatus(e),QHPass.resConfig.initModule&&QHPass.resConfig.initModule(e)}function r(){if(location.host.indexOf("360.cn")>-1)return;QHPass.getUserInfo(QHPass.setloginStatus,function(){QHPass.autoLogin(QHPass.resConfig.callback)})}if(QHPass.resConfig.isAutoLogin){r();return}QHPass.resConfig.loginStatus&&t(),QHPass.log()}catch(i){}})})();(function(e){var t=window.jQuery||window.$||window.qui||window.QW&&window.QW.NodeW,n=location.host.match(/1360\.com|360\.cn|qihoo\.com|woxihuan\.com|yunpan\.cn|360kan\.com|so\.com|360pay\.cn/ig);t.prototype.append||(t.prototype.append=t.prototype.appendChild),e.tmpl=function(e,t){e=String(e);var n=Array.prototype.slice.call(arguments,1),r=Object.prototype.toString;return n.length?(n=n.length==1?t!==null&&/\[object Array\]|\[object Object\]/.test(r.call(t))?t:n:n,e.replace(/#\{(.+?)\}/g,function(e,t){var i=n[t];return"[object Function]"==r.call(i)&&(i=i(t)),"undefined"==typeof i?"":i})):e},e.showLogin=function(r,i){i=i||{},QHPass.cssLoadOnce&&QHPass.cssLoadOnce(),QHPass.Adapter.globalCallback=r,QHPass.mix(i,QHPass.resConfig.loginOpts||{});for(var s in QHPass.Adapter.loginOpts)if(QHPass.Adapter.loginOpts[s]){i=QHPass.Adapter.loginOpts;break}var o=i.title||QHPass.resConfig&&QHPass.resConfig.loginTitle||"",u=i.width||380,a=QHPass.Adapter.ssoOpts.wrap=i.wrap||"",f=i.css||QHPass.resConfig&&QHPass.resConfig.css||"",l=i.thirdLogin||[],c=QHPass.Adapter.ssoOpts.type=i.type||"pop",h=i.captFlag||!1,p=i.checkPharse||!1,d=i.afterRender||QHPass.resConfig.loginOpts&&QHPass.resConfig.loginOpts.afterRender||"",v=i.customHtml||!1,m=i.height||320;QHPass.Adapter.cookie_domains[0]!=0?i.cookie_domains=QHPass.Adapter.cookie_domains:i.cookie_domains=QHPass.Adapter.cookie_domains=i.cookie_domains||QHPass.resConfig&&QHPass.resConfig.cookie_domains||[],f&&QHPass.loadCss&&QHPass.loadCss(f);var g=[],y=[],b="",w="",E="",S=['<dd class="other"><span>\u7528\u5176\u4ed6\u5e10\u53f7\u767b\u5f55\uff1a</span>'],x=["formStart","userName","password","find","submit","formEnd"];h||p?(x.splice(4,0,"phrase"),x.splice(6,0,"thirdLogin")):x.splice(5,0,"thirdLogin"),l.length>0&&(y=l[0].split("|"),b=l[1]||"",w=l[2]||"pop",E=l[3]||"",QHPass.forEach(y,function(t){S.push(e.tmpl(QHPass.tpl.pspFriend[t],{from:b,type:w,destUrl:E}))}),S.push("</dd>"),QHPass.tpl.loginTpl.thirdLogin=S.join("")),QHPass.forEach(x,function(e){g.push(QHPass.tpl.loginTpl[e])});if(!v)if(c=="pop")QHPass.closePop(),QHPass.addPop(m,u,"login"),t("#modQiUserPop").html(g.join("")),t(".tab-login").addClass("cur"),t(".mod-qiuser-pop").css({height:m+"px"}),QHPass.resizeAndshow(m,u);else{if(!a)return;t("#"+a).html(g.join(""))}o&&t("#quc_top_title").html(o);try{t(".clk-regnew").click(function(e){var t=QHPass.resConfig&&QHPass.resConfig.regType;QHPass.showReg&&QHPass.showReg(QHPass.Adapter.globalCallback),QHPass.preventDefault(e)})}catch(T){}n&&n[0].indexOf("360.cn")==-1&&QHPass.loadJsonp(QHDomain.login_https+"/?o=sso&m=info&func=%callback%&need_ck=1",function(e){e.auth&&e.auth.length>0&&(t("#gotoQuickLogin").show(),t("#gotoQuickLogin").click(function(e){QHPass.showSso(r),QHPass.preventDefault(e)}))}),d&&d();try{t(".pop-dia-close").on("click",function(e){QHPass.resConfig.loginAfterSetName=!1,QHPass.closePop&&QHPass.closePop(),QHPass.preventDefault(e)})}catch(N){}QHPass.loginUtils.initEvent(QHPass.Adapter.globalCallback,i)},e.showSso=function(e,r){r=r||{},QHPass.cssLoadOnce&&QHPass.cssLoadOnce(),QHPass.mix(r,QHPass.resConfig.ssoOpts||{});for(var i in QHPass.Adapter.ssoOpts)if(QHPass.Adapter.ssoOpts[i]){r=QHPass.Adapter.ssoOpts;break}var s=r.title||QHPass.resConfig&&QHPass.resConfig.loginTitle||"",o=r.width||350,u=r.height||270,a=r.css||QHPass.resConfig&&QHPass.resConfig.css||"",f=QHPass.Adapter.loginOpts.wrap=r.wrap||"",l=r.afterRender||QHPass.resConfig.ssoOpts&&QHPass.resConfig.ssoOpts.afterRender||"",c=QHPass.Adapter.loginOpts.type=r.type||"pop";if(n&&n[0].indexOf("360.cn")>-1){QHPass.showLogin(e);return}a&&QHPass.loadCss(a),QHPass.loadJsonp("https://login.360.cn/?o=sso&m=info&func=%callback%&need_ck=1",function(n){if(n.auth&&n.auth.length>0){if(c=="pop")QHPass.closePop&&QHPass.closePop(),QHPass.addPop(u,o,"login"),t("#modQiUserPop").html(QHPass.tpl.ssoTpl),t(".mod-qiuser-pop").css({height:u+"px"}),QHPass.resizeAndshow(u,o);else{if(!f)return;t("#"+f).html(QHPass.tpl.ssoTpl)}s&&t("#quc_top_title").html(s),QHPass.loginUtils.userAuth(n);try{t(".pop-dia-close").on("click",function(e){QHPass.resConfig.loginAfterSetName=!1,QHPass.closePop(),QHPass.preventDefault(e)})}catch(r){}l&&l(),t("#quickLogin").click(function(){QHPass.loginUtils.quickLogin(e)}),t("#usedOtherAccount").click(function(t){QHPass.login(e),QHPass.preventDefault(t)})}else QHPass.showLogin(e)})},e.initPlaceHolders=function(){function e(e){var e=e||window.event;return e.target||e.srcElement}function n(e){var t=e.hintEl;return t&&g(t)}function r(t){var n=e(t),r=n.__emptyHintEl;if(!n||n.tagName!="INPUT"&&n.tagName!="TEXTAREA")return;r&&(n.value?r.style.display="none":r.style.display="")}function i(t){var n=e(t),r=n.__emptyHintEl;if(!n||n.tagName!="INPUT"&&n.tagName!="TEXTAREA")return;r&&(r.style.display="none")}if("placeholder"in document.createElement("input"))return;document.addEventListener?(document.addEventListener("focus",i,!0),document.addEventListener("blur",r,!0)):(document.attachEvent("onfocusin",i),document.attachEvent("onfocusout",r));var s=t(".mod-qiuser-pop")[0],o=[s.getElementsByTagName("input"),document.getElementsByTagName("textarea")],u=0,a=0,f,l,c;for(u=0;u<2;u++){l=o[u];for(a=0;a<l.length;a++){c=l[a],f=c.getAttribute("placeholder"),emptyHintEl=c.__emptyHintEl;if(f&&!emptyHintEl){emptyHintEl=document.createElement("span"),emptyHintEl.innerHTML=f,emptyHintEl.className="emptyhint",emptyHintEl.onclick=function(e){return function(){try{e.focus()}catch(t){}}}(c);if(c.value||c==document.activeElement)emptyHintEl.style.display="none";c.parentNode.insertBefore(emptyHintEl,c),c.__emptyHintEl=emptyHintEl}}}}})(QHPass),function(e){var t=window.jQuery||window.qui||window.QW&&window.QW.NodeW,n=QHDomain.login_https+"/?o=sso&m=getToken",r="",i=[],s=location.host.indexOf("360.cn")>-1?QHDomain.captcha+"/image.php?app=":QHDomain.i360+"/reg/doGetCap?app=",o="",u="i360",a="",f=!1,l=[],c=1;prevUsername="",captFlag=!1,loginStatusHandle=null,type="pop",checkPharse=!1,t0="",t1="",callBack=null,onLoading=null,auth_info={},onError=null,t.prototype.parent||(t.prototype.parent=t.prototype.parentNode);var h={loginStatusHandle:null,win:null,showErrs:function(e,n){return clearInterval(loginStatusHandle),t("#error_tips").removeClass("login-loading").addClass("login-error"),n&&t("#error_tips").html(n),!1},getLoginUrl:function(){return QHDomain.login_https+"/?o=sso&m=login&from="+QHPass.resConfig.src+"&rtype=data&func=QHPass.loginUtils.loginCallback"},tokenCallback:function(e){if(e.errno!=0)return!1;var n="\u6b63\u5728\u767b\u5f55\uff0c\u8bf7\u7a0d\u5019",r=c,i=1,s="\u00b7",o="",u=QHPass.trim(t("#loginAccount").val()),a=t("#lpassword").val(),f=t("#iskeepalive").attr("checked")?1:0,l=t("#phraseLogin").val();this.doLogin(u,a,f,e.token,l)},doLogin:function(e,t,n,i,s){var o=[];o.push("userName="+encodeURIComponent(e)),o.push("pwdmethod=1"),o.push("password="+hex_md5(t)),o.push("isKeepAlive="+n),o.push("token="+i),captFlag||checkPharse?(o.push("captFlag=1"),o.push("captId="+u),o.push("captCode="+encodeURIComponent(s))):o.push("captFlag="),o.push("r="+(new Date).getTime()),t0=(new Date).getTime(),r=this.getLoginUrl(),QHPass.loadJsonp(r+"&"+o.join("&"))},loginSuccess:function(){t("#error_tips").removeClass("login-loading").addClass("login-success"),clearInterval(loginStatusHandle),t("#error_tips").html(""),t1=(new Date).getTime(),QHPass.Cookie.set("i360loginName",t("#loginAccount").val(),{expires:5184e6,path:"/"}),o.ldtime=t1-t0;try{QHPass.setloginStatus(o)}catch(e){}QHPass.execCallback(callBack,o)},setCookieCallback:function(e){if(e.errno>0){t("#loginSubmit")[0].disabled=!1;return}var n=l.length;l[n++]=e.domain,n<i.length?QHPass.loadJsonp(i[n]+"/?o=sso&m=setcookie&func=QHPass.loginUtils.setCookieCallback&"+"s="+a):h.loginSuccess()},loginuse:function(e,t,n,r){var i=(new Date).getTime(),s="";if(t=="pop"){var o=QHPass.getDocRect();toleft=o.scrollX+(o.width-650)/2,totop=Math.max(o.scrollY+(o.height-500)/2,0);switch(e){case"Sina":s="left="+toleft+",top="+totop+",alwaysRaised=yes,height=500,width=650";break;case"RenRen":s="left="+toleft+",top="+totop+",alwaysRaised=yes,height=500,width=650";break;case"Fetion":s="left="+toleft+",top="+totop+",alwaysRaised=yes,height=500,width=650";break;case"Msn":s="left="+toleft+",top="+totop+",alwaysRaised=yes,height=500,width=650"}}else if(t=="self"){this.win=window.open(QHDomain.i360+"/oauth/loginByOauth?c="+e+"&type="+t+"&destUrl="+encodeURIComponent(r)+"&f="+n+"&r="+i,"_self");return}this.win=window.open(QHDomain.i360+"/oauth/loginByOauth?c="+e+"&type="+t+"&destUrl="+encodeURIComponent(r)+"&f="+n+"&r="+i,"oauthlogin",s)},closeOpenHander:function(){return this.win.close()},loginCallback:function(e){if(e.errno==0)a=e.s,o=e.userinfo,f?h.loginSuccess():QHPass.loadJsonp(i[0]+"/?o=sso&m=setcookie&func=QHPass.loginUtils.setCookieCallback&"+"s="+e.s);else{t("#loginSubmit")[0].disabled=!1,t2=(new Date).getTime(),onError&&onError(t2-t0);switch(e.errno){case 221:t("#loginAccount").focus(),e.capturl&&(t("#lwm").attr("src",e.capturl+"&r="+Math.random()),t("#phraseLogin").val("")),h.showErrs("loginAccount",e.errmsg),t("#lpassword").val("");break;case 219:case 220:t("#lpassword").val(""),t("#lpassword").focus(),e.capturl&&(t("#lwm").attr("src",e.capturl+"&r="+Math.random()),t("#phraseLogin").val("")),h.showErrs("lpassword","\u5e10\u53f7\u6216\u5bc6\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165");break;case"login_captcha_001":case"login_captcha_002":case"login_captcha_003":checkPharse=!0,t("#phraseLoginwarp").show(),t("#phraseLogin").focus(),t("#lwm").attr("src",e.capturl+"&r="+Math.random()),h.showErrs("",e.errmsg);break;default:h.showErrs("",e.errmsg),this.setPhrase()}}},submit:function(){var e="\u6b63\u5728\u767b\u5f55\uff0c\u8bf7\u7a0d\u5019",r=1,i="\u00b7",s="",o=QHPass.trim(t("#loginAccount").val()),u=/^(13|14|15|18)\d{9}$/,a=t("#lpassword").val(),f=t("#phraseLogin").val(),l=n+"&func=QHPass.loginUtils.tokenCallback&"+"userName="+encodeURIComponent(o)+"&rand="+Math.random();if(o=="")return t("#loginAccount").val("").focus(),h.showErrs("loginAccount","\u5e10\u53f7\u4e0d\u80fd\u4e3a\u7a7a");if(a=="")return t("#lpassword").val("").focus(),h.showErrs("lpassword","\u767b\u5f55\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a");if(QHPass.byteLen(a)<6)return t("#lpassword").val("").focus(),h.showErrs("lpassword","\u5e10\u53f7\u6216\u5bc6\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165");if(checkPharse&&f.length!=4)return t("#phraseLogin").val("").focus(),h.showErrs("phraseLogin");t("#error_tips").removeClass("login-error").addClass("login-loading"),onLoading&&onLoading(),loginStatusHandle=setInterval(function(){r%4==0?s="":s+=i,t("#error_tips").html(e+s),r++},300),t("#loginSubmit")[0].disabled=!0,QHPass.loadJsonp(l)},initEvent:function(e,n){function o(){setTimeout(function(){var e=QHPass.Cookie.get("i360loginName");e&&e!="undefined"&&t("#loginAccount").val(e),QHPass.initPlaceHolders()},50)}callBack=e,onError=n.onError||"",onLoading=n.onLoading||"",captFlag=n.captFlag||!1,type=n.type||"pop",checkPharse=n.checkPharse||!1,checkPharse&&(t("#phraseLoginwarp").show(),this.setPhrase());var r=n.cookie_domains||[],s=r.length&&r||["1360|qihoo|woxihuan|yunpan|360kan|so|360pay"];i=[],r.length==2&&r[1]=="nc"?f=!0:(s=s[0].split("|"),QHPass.forEach(s,function(e){e=="360pay"||e=="yunpan"?i.push("http://rd.login."+e+".cn"):"1360|qihoo|woxihuan|360kan|so".indexOf(e)>-1&&i.push("http://rd.login."+e+".com")})),t(".tipinput1").focus(function(){var e=t(this).attr("id");e=="phraseLogin"?t(this).parent().removeClass("verify-code").addClass("verify-code-focus"):t(this).parent().removeClass("input-bg").addClass("input-bg-focus")}).blur(function(){var e=t(this).attr("id");e=="phraseLogin"?t(this).parent().removeClass("verify-code-focus").addClass("verify-code"):t(this).parent().removeClass("input-bg-focus").addClass("input-bg"),t(".icon-"+e).hide()}),t(".tipinput1").on("keyup",function(e){var n=t(this).attr("id");t(".icon-"+n).hide()}),t("#loginAccount").blur(function(){var e=QHPass.trim(t("#loginAccount").val());e!=prevUsername&&t(".icon-userName").hide(),prevUsername=e}),t("#lwm,#refreshCaptchaLogin").click(function(e){QHPass.loginUtils.setPhrase(),QHPass.preventDefault(e)}),type=="pop"?o():t(window).on("load",function(){o()})},setPhrase:function(){s=QHDomain.i360+"/reg/doGetCap?app=",t("#lwm").attr("src",s+u+"&r="+Math.random())},userAuth:function(e){auth_info=e,e.userName&&t("#qhAccount").html(e.userName)},quickLogin:function(e){QHPass.autoAuth(e,auth_info)}};e.loginUtils=h}(QHPass),QHPass.tpl.loginTpl={formStart:['<div id="modLoginWrap" class="mod-qiuser-pop">','<iframe style="display:none" name="loginiframe"></iframe><form id="loginForm" method="post" target="loginiframe" onsubmit="QHPass.loginUtils.submit();return false;">',' <dl class="login-wrap">','<dt><span id="loginTitle"></span></dt>'].join(""),userName:["<dd >",'<div class="quc-clearfix login-item">','<label for="loginAccount" >\u5e10\u53f7</label>','<span class="input-bg"><input placeholder="\u624b\u673a\u53f7/\u7528\u6237\u540d/\u90ae\u7bb1" type="text" tabindex="1" id="loginAccount" name="username" autocomplete="off" maxlength="100"  class="ipt tipinput1"/></span>','<b class="tips-wrong icon-loginAccount"></b>',"</div>","</dd>"].join(""),password:['<dd class="password">','<div class="quc-clearfix login-item">','<label for="lpassword" >\u5bc6\u7801</label>','<span class="input-bg"><input placeholder="\u8bf7\u8f93\u5165\u60a8\u7684\u5bc6\u7801" type="password" tabindex="2" id="lpassword" name="password" maxlength="40"  autocomplete="off" class="ipt tipinput1"/></span>','<b class="tips-wrong icon-lpassword"></b>',"</div>","</dd>"].join(""),phrase:['<dd class="rem" id="phraseLoginwarp" style="display:none" >','<label for="phraseLogin">\u9a8c\u8bc1\u7801</label>','<span class="verify-code"><input type="text" tabindex="3" maxlength="4" id="phraseLogin" name="phrase" class="ipt1 tipinput1" autocomplete="off"></span>','<p class="yz"><img width="99" height="35" style="cursor: pointer;" id="lwm"><b class="tips-wrong  icon-phraseLogin"></b>','<a  class="ml8 fac" href="#nogo" id="refreshCaptchaLogin">\u6362\u4e00\u5f20</a>',"</p>",'<p><span id="tips-phraseLogin" class="tips-phrase">\u8bf7\u8f93\u5165\u56fe\u4e2d\u7684\u5b57\u6bcd\u6216\u6570\u5b57\uff0c\u4e0d\u533a\u5206\u5927\u5c0f\u5199</span></p>',"</dd>"].join(""),find:['<dd class="find">','<label for="iskeepalive"><input type="checkbox" tabindex="4" name="iskeepalive" id="iskeepalive" checked="checked"> \u4e0b\u6b21\u81ea\u52a8\u767b\u5f55</label>',"<a href="+QHDomain.i360+'/findpwd/  target="_blank" class="fac" id="findPwd">\u5fd8\u8bb0\u5bc6\u7801\uff1f</a>',"</dd>"].join(""),thirdLogin:"",submit:['<dd class="submit">','<div><input type="submit"  id="loginSubmit" value="" class="btn-login"></div>','<div class="no-account"><span class="no-account-text">\u5982\u679c\u4f60\u8fd8\u6ca1\u6709360\u5e10\u53f7\uff0c\u8bf7</span><a href="###" class="fac clk-regnew">&nbsp;\u70b9\u51fb\u6ce8\u518c</a></div>',"</dd>"].join(""),formEnd:['<dd ><a href="###" id="gotoQuickLogin" class="fa2 quick-login"">\u5207\u6362\u5230\u5feb\u901f\u767b\u5f55\u6a21\u5f0f</a></dd><dd>','<div id="error_tips" class=""></div>',"</dd>","</dl>","</form>","</div>"].join("")},QHPass.tpl.pspFriend={sina:"<a href=\"#\" onclick=\"QHPass.loginUtils.loginuse('Sina','#{type}','#{from}','#{destUrl}'); return false;\"  class=\"loginbtn_sina\"  title=\"\u65b0\u6d6a\u5fae\u535a\u767b\u5f55\"></a>",renren:"<a href=\"#\"  onclick=\"QHPass.loginUtils.loginuse('RenRen','#{type}','#{from}','#{destUrl}'); return false;\" class=\"loginbtn_rr\"  title=\"\u4eba\u4eba\u767b\u5f55\"></a>",fetion:"<a href=\"#\" onclick=\"QHPass.loginUtils.loginuse('Fetion','#{type}','#{from}','#{destUrl}'); return false;\" class=\"loginbtn_fx\"  title=\"\u98de\u4fe1\"></a>",msn:"<a href=\"#\"  onclick=\"QHPass.loginUtils.loginuse('Msn','#{type}','#{from}','#{destUrl}'); return false;\"  class=\"loginbtn_msn\" title=\"Msn\u767b\u5f55\"></a>"},QHPass.tpl.ssoTpl='<div class="mod-loginaccount mod-qiuser-pop"><p class="q-login-title">\u68c0\u6d4b\u5230\u60a8\u5df2\u767b\u5f55360\u5e10\u53f7</p><p><span class="q-login-info" id="qhAccount"></span></p><p><button class="q-login-btn" id="quickLogin" ></button></p><p><a class="fac2" href="###" id="usedOtherAccount">\u4f7f\u7528\u5176\u4ed6\u5e10\u53f7\u767b\u5f55</a></p></div>';function hex_md5(e){return binl2hex(core_md5(str2binl(e),e.length*chrsz))}function b64_md5(e){return binl2b64(core_md5(str2binl(e),e.length*chrsz))}function str_md5(e){return binl2str(core_md5(str2binl(e),e.length*chrsz))}function hex_hmac_md5(e,t){return binl2hex(core_hmac_md5(e,t))}function b64_hmac_md5(e,t){return binl2b64(core_hmac_md5(e,t))}function str_hmac_md5(e,t){return binl2str(core_hmac_md5(e,t))}function md5_vm_test(){return hex_md5("abc")=="900150983cd24fb0d6963f7d28e17f72"}function core_md5(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;var n=1732584193,r=-271733879,i=-1732584194,s=271733878;for(var o=0;o<e.length;o+=16){var u=n,a=r,f=i,l=s;n=md5_ff(n,r,i,s,e[o+0],7,-680876936),s=md5_ff(s,n,r,i,e[o+1],12,-389564586),i=md5_ff(i,s,n,r,e[o+2],17,606105819),r=md5_ff(r,i,s,n,e[o+3],22,-1044525330),n=md5_ff(n,r,i,s,e[o+4],7,-176418897),s=md5_ff(s,n,r,i,e[o+5],12,1200080426),i=md5_ff(i,s,n,r,e[o+6],17,-1473231341),r=md5_ff(r,i,s,n,e[o+7],22,-45705983),n=md5_ff(n,r,i,s,e[o+8],7,1770035416),s=md5_ff(s,n,r,i,e[o+9],12,-1958414417),i=md5_ff(i,s,n,r,e[o+10],17,-42063),r=md5_ff(r,i,s,n,e[o+11],22,-1990404162),n=md5_ff(n,r,i,s,e[o+12],7,1804603682),s=md5_ff(s,n,r,i,e[o+13],12,-40341101),i=md5_ff(i,s,n,r,e[o+14],17,-1502002290),r=md5_ff(r,i,s,n,e[o+15],22,1236535329),n=md5_gg(n,r,i,s,e[o+1],5,-165796510),s=md5_gg(s,n,r,i,e[o+6],9,-1069501632),i=md5_gg(i,s,n,r,e[o+11],14,643717713),r=md5_gg(r,i,s,n,e[o+0],20,-373897302),n=md5_gg(n,r,i,s,e[o+5],5,-701558691),s=md5_gg(s,n,r,i,e[o+10],9,38016083),i=md5_gg(i,s,n,r,e[o+15],14,-660478335),r=md5_gg(r,i,s,n,e[o+4],20,-405537848),n=md5_gg(n,r,i,s,e[o+9],5,568446438),s=md5_gg(s,n,r,i,e[o+14],9,-1019803690),i=md5_gg(i,s,n,r,e[o+3],14,-187363961),r=md5_gg(r,i,s,n,e[o+8],20,1163531501),n=md5_gg(n,r,i,s,e[o+13],5,-1444681467),s=md5_gg(s,n,r,i,e[o+2],9,-51403784),i=md5_gg(i,s,n,r,e[o+7],14,1735328473),r=md5_gg(r,i,s,n,e[o+12],20,-1926607734),n=md5_hh(n,r,i,s,e[o+5],4,-378558),s=md5_hh(s,n,r,i,e[o+8],11,-2022574463),i=md5_hh(i,s,n,r,e[o+11],16,1839030562),r=md5_hh(r,i,s,n,e[o+14],23,-35309556),n=md5_hh(n,r,i,s,e[o+1],4,-1530992060),s=md5_hh(s,n,r,i,e[o+4],11,1272893353),i=md5_hh(i,s,n,r,e[o+7],16,-155497632),r=md5_hh(r,i,s,n,e[o+10],23,-1094730640),n=md5_hh(n,r,i,s,e[o+13],4,681279174),s=md5_hh(s,n,r,i,e[o+0],11,-358537222),i=md5_hh(i,s,n,r,e[o+3],16,-722521979),r=md5_hh(r,i,s,n,e[o+6],23,76029189),n=md5_hh(n,r,i,s,e[o+9],4,-640364487),s=md5_hh(s,n,r,i,e[o+12],11,-421815835),i=md5_hh(i,s,n,r,e[o+15],16,530742520),r=md5_hh(r,i,s,n,e[o+2],23,-995338651),n=md5_ii(n,r,i,s,e[o+0],6,-198630844),s=md5_ii(s,n,r,i,e[o+7],10,1126891415),i=md5_ii(i,s,n,r,e[o+14],15,-1416354905),r=md5_ii(r,i,s,n,e[o+5],21,-57434055),n=md5_ii(n,r,i,s,e[o+12],6,1700485571),s=md5_ii(s,n,r,i,e[o+3],10,-1894986606),i=md5_ii(i,s,n,r,e[o+10],15,-1051523),r=md5_ii(r,i,s,n,e[o+1],21,-2054922799),n=md5_ii(n,r,i,s,e[o+8],6,1873313359),s=md5_ii(s,n,r,i,e[o+15],10,-30611744),i=md5_ii(i,s,n,r,e[o+6],15,-1560198380),r=md5_ii(r,i,s,n,e[o+13],21,1309151649),n=md5_ii(n,r,i,s,e[o+4],6,-145523070),s=md5_ii(s,n,r,i,e[o+11],10,-1120210379),i=md5_ii(i,s,n,r,e[o+2],15,718787259),r=md5_ii(r,i,s,n,e[o+9],21,-343485551),n=safe_add(n,u),r=safe_add(r,a),i=safe_add(i,f),s=safe_add(s,l)}return Array(n,r,i,s)}function md5_cmn(e,t,n,r,i,s){return safe_add(bit_rol(safe_add(safe_add(t,e),safe_add(r,s)),i),n)}function md5_ff(e,t,n,r,i,s,o){return md5_cmn(t&n|~t&r,e,t,i,s,o)}function md5_gg(e,t,n,r,i,s,o){return md5_cmn(t&r|n&~r,e,t,i,s,o)}function md5_hh(e,t,n,r,i,s,o){return md5_cmn(t^n^r,e,t,i,s,o)}function md5_ii(e,t,n,r,i,s,o){return md5_cmn(n^(t|~r),e,t,i,s,o)}function core_hmac_md5(e,t){var n=str2binl(e);n.length>16&&(n=core_md5(n,e.length*chrsz));var r=Array(16),i=Array(16);for(var s=0;s<16;s++)r[s]=n[s]^909522486,i[s]=n[s]^1549556828;var o=core_md5(r.concat(str2binl(t)),512+t.length*chrsz);return core_md5(i.concat(o),640)}function safe_add(e,t){var n=(e&65535)+(t&65535),r=(e>>16)+(t>>16)+(n>>16);return r<<16|n&65535}function bit_rol(e,t){return e<<t|e>>>32-t}function str2binl(e){var t=Array(),n=(1<<chrsz)-1;for(var r=0;r<e.length*chrsz;r+=chrsz)t[r>>5]|=(e.charCodeAt(r/chrsz)&n)<<r%32;return t}function binl2str(e){var t="",n=(1<<chrsz)-1;for(var r=0;r<e.length*32;r+=chrsz)t+=String.fromCharCode(e[r>>5]>>>r%32&n);return t}function binl2hex(e){var t=hexcase?"0123456789ABCDEF":"0123456789abcdef",n="";for(var r=0;r<e.length*4;r++)n+=t.charAt(e[r>>2]>>r%4*8+4&15)+t.charAt(e[r>>2]>>r%4*8&15);return n}function binl2b64(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="";for(var r=0;r<e.length*4;r+=3){var i=(e[r>>2]>>8*(r%4)&255)<<16|(e[r+1>>2]>>8*((r+1)%4)&255)<<8|e[r+2>>2]>>8*((r+2)%4)&255;for(var s=0;s<4;s++)r*8+s*6>e.length*32?n+=b64pad:n+=t.charAt(i>>6*(3-s)&63)}return n}var hexcase=0,b64pad="",chrsz=8;